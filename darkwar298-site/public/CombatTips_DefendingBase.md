When defending your base you need to make sure your APCs are recalled to base so that your strongest heroes are guarding the city gate and all of your troops are part of your defensive strength. If you are being rally attacked, you can teleport your base to dodge the rally attack before it lands. After an enemy attacks your base, you can send your troops out to attack their APC immediately after once they are weakened instead of fighting them at full strength. 